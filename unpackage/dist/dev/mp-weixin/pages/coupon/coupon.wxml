<view class="coupon-page data-v-032f11f4"><view class="stats-section data-v-032f11f4"><view class="stats-card data-v-032f11f4"><view class="stats-item data-v-032f11f4"><text class="stats-number data-v-032f11f4">{{$root.g0}}</text><text class="stats-label data-v-032f11f4">可用优惠券</text></view><view class="stats-divider data-v-032f11f4"></view><view class="stats-item data-v-032f11f4"><text class="stats-number data-v-032f11f4">{{$root.g1}}</text><text class="stats-label data-v-032f11f4">已使用</text></view><view class="stats-divider data-v-032f11f4"></view><view class="stats-item data-v-032f11f4"><text class="stats-number data-v-032f11f4">{{$root.g2}}</text><text class="stats-label data-v-032f11f4">已过期</text></view></view></view><view class="tab-section data-v-032f11f4"><view class="tab-list data-v-032f11f4"><block wx:for="{{tabs}}" wx:for-item="tab" wx:for-index="__i0__" wx:key="key"><view data-event-opts="{{[['tap',[['switchTab',['$0'],[[['tabs','key',tab.key,'key']]]]]]]}}" class="{{['tab-item','data-v-032f11f4',(activeTab===tab.key)?'active':'']}}" bindtap="__e">{{''+tab.name+''}}<block wx:if="{{tab.count>0}}"><view class="tab-badge data-v-032f11f4">{{tab.count}}</view></block></view></block></view></view><view class="coupon-list data-v-032f11f4"><block wx:if="{{activeTab==='available'}}"><view class="data-v-032f11f4"><block wx:for="{{$root.l0}}" wx:for-item="coupon" wx:for-index="__i1__" wx:key="id"><view class="coupon-item data-v-032f11f4"><view class="coupon-content data-v-032f11f4"><view class="coupon-left data-v-032f11f4"><view class="coupon-amount data-v-032f11f4"><text class="currency data-v-032f11f4">¥</text><text class="amount data-v-032f11f4">{{coupon.$orig.amount}}</text></view><text class="coupon-condition data-v-032f11f4">{{coupon.$orig.condition}}</text></view><view class="coupon-divider data-v-032f11f4"></view><view class="coupon-right data-v-032f11f4"><text class="coupon-name data-v-032f11f4">{{coupon.$orig.name}}</text><text class="coupon-desc data-v-032f11f4">{{coupon.$orig.description}}</text><text class="coupon-time data-v-032f11f4">{{"有效期至："+coupon.m0}}</text></view></view><view class="coupon-actions data-v-032f11f4"><button size="mini" type="primary" data-event-opts="{{[['tap',[['useCoupon',['$0'],[[['availableCoupons','id',coupon.$orig.id]]]]]]]}}" bindtap="__e" class="data-v-032f11f4">立即使用</button></view></view></block></view></block><block wx:if="{{activeTab==='used'}}"><view class="data-v-032f11f4"><block wx:for="{{$root.l1}}" wx:for-item="coupon" wx:for-index="__i2__" wx:key="id"><view class="coupon-item used data-v-032f11f4"><view class="coupon-content data-v-032f11f4"><view class="coupon-left data-v-032f11f4"><view class="coupon-amount data-v-032f11f4"><text class="currency data-v-032f11f4">¥</text><text class="amount data-v-032f11f4">{{coupon.$orig.amount}}</text></view><text class="coupon-condition data-v-032f11f4">{{coupon.$orig.condition}}</text></view><view class="coupon-divider data-v-032f11f4"></view><view class="coupon-right data-v-032f11f4"><text class="coupon-name data-v-032f11f4">{{coupon.$orig.name}}</text><text class="coupon-desc data-v-032f11f4">{{coupon.$orig.description}}</text><text class="coupon-time data-v-032f11f4">{{"使用时间："+coupon.m1}}</text></view></view><view class="used-mark data-v-032f11f4">已使用</view></view></block></view></block><block wx:if="{{activeTab==='expired'}}"><view class="data-v-032f11f4"><block wx:for="{{$root.l2}}" wx:for-item="coupon" wx:for-index="__i3__" wx:key="id"><view class="coupon-item expired data-v-032f11f4"><view class="coupon-content data-v-032f11f4"><view class="coupon-left data-v-032f11f4"><view class="coupon-amount data-v-032f11f4"><text class="currency data-v-032f11f4">¥</text><text class="amount data-v-032f11f4">{{coupon.$orig.amount}}</text></view><text class="coupon-condition data-v-032f11f4">{{coupon.$orig.condition}}</text></view><view class="coupon-divider data-v-032f11f4"></view><view class="coupon-right data-v-032f11f4"><text class="coupon-name data-v-032f11f4">{{coupon.$orig.name}}</text><text class="coupon-desc data-v-032f11f4">{{coupon.$orig.description}}</text><text class="coupon-time data-v-032f11f4">{{"过期时间："+coupon.m2}}</text></view></view><view class="expired-mark data-v-032f11f4">已过期</view></view></block></view></block><block wx:if="{{$root.g3===0}}"><view class="empty-state data-v-032f11f4"><image class="empty-image data-v-032f11f4" src="/static/images/empty-coupon.png"></image><text class="empty-text data-v-032f11f4">{{$root.m3}}</text></view></block></view><block wx:if="{{activeTab==='available'}}"><view class="receive-section data-v-032f11f4"><view class="section-title data-v-032f11f4"><text class="title-text data-v-032f11f4">领券中心</text><text data-event-opts="{{[['tap',[['viewMoreCoupons',['$event']]]]]}}" class="more-text data-v-032f11f4" bindtap="__e">更多优惠券 ></text></view><view class="receive-list data-v-032f11f4"><block wx:for="{{availableToReceive}}" wx:for-item="coupon" wx:for-index="__i4__" wx:key="id"><view class="receive-item data-v-032f11f4"><view class="coupon-content data-v-032f11f4"><view class="coupon-left data-v-032f11f4"><view class="coupon-amount data-v-032f11f4"><text class="currency data-v-032f11f4">¥</text><text class="amount data-v-032f11f4">{{coupon.amount}}</text></view><text class="coupon-condition data-v-032f11f4">{{coupon.condition}}</text></view><view class="coupon-divider data-v-032f11f4"></view><view class="coupon-right data-v-032f11f4"><text class="coupon-name data-v-032f11f4">{{coupon.name}}</text><text class="coupon-desc data-v-032f11f4">{{coupon.description}}</text><text class="coupon-time data-v-032f11f4">{{"有效期：领取后"+coupon.validDays+"天"}}</text></view></view><view class="coupon-actions data-v-032f11f4"><button size="mini" type="primary" loading="{{coupon.receiving}}" disabled="{{coupon.received||coupon.stock<=0}}" data-event-opts="{{[['tap',[['receiveCoupon',['$0'],[[['availableToReceive','id',coupon.id]]]]]]]}}" bindtap="__e" class="data-v-032f11f4">{{''+(coupon.stock<=0?'已领完':coupon.received?'已领取':'立即领取')+''}}</button></view></view></block></view></view></block></view>